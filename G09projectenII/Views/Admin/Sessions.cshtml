@using System.Diagnostics
@using System.Globalization
@model ICollection<Session>

@{
    ViewBag.Title = "Sessies Beheren";
    CultureInfo.CurrentCulture = new CultureInfo("nl-BE");
}

<link href="~/css/manageSessions.css" rel="stylesheet">



<section>
    <div class="panel-group sessions-panel" id="accordion" role="tablist" aria-multiselectable="true">

        @foreach (var s in Model)
        {
            <div class="panel panel-default">
                <div class="panel-heading" role="tab" id="@("heading" + s.Id)">
                    <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="@("#collapse" + s.Id)" aria-expanded="false" aria-controls="@("collapse" + s.Id)">
                        <span class="session-date">
                            @s.StartDateTime.ToString("ddd d MMM")
                        </span>
                        <span class="session-time">@s.StartDateTime.ToString("hh:mm") - @s.EndDateTime.ToString("hh:mm")</span>
                        <span class="session-title">
                            @s.Title
                        </span>
                        <span class="badge badge-pill session-state @("state"+s.SessionState.ToInt())">
                            @s.SessionState.ToString()
                        </span>
                    </a>

                    <div class="right">
                        @switch (s.SessionState.ToInt())
                        {
                            case 0:<button class="session-state-change btn btn-outline-success">Openen</button>
                                break;
                            case 1: <button class="session-state-change btn btn-outline-warning">Sluiten</button>
                                break;
                            case 2: <button class="session-state-change btn btn-outline-danger">Afsluiten</button>
                                break;
                            default:
                                break;
                        }

                        <a class="collapse-arrow collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="@("#collapse" + s.Id)" aria-expanded="false" aria-controls="@("collapse" + s.Id)">
                            <i class="fas fa-chevron-right"></i>
                        </a>
                    </div>
                </div>

                <div id="@("collapse" + s.Id)" class="panel-collapse collapse" role="tabpanel" aria-labelledby="@("heading" + s.Id)">
                    <div class="panel-body">
                        @if (!string.IsNullOrEmpty(s.Description)) 
                        { 
                            <div class="session-description">
                                <b>Beschrijving:</b>
                                <p>@Html.Raw(s.Description)</p>
                            </div>
                        }
                        <div class="session-practical-info">
                            @if (!string.IsNullOrEmpty(s.Location))
                            {
                                <span class="session-location">
                                    <i class="fas fa-map-marker-alt"></i>
                                    @Html.Raw(s.Location)
                                </span>
                            }
                            <span>
                                <i class="fas fa-user"></i>
                                @Html.Raw(@s.Member.Firstname) @Html.Raw(@s.Member.Lastname)
                            </span>
                        </div>
                    </div>
                </div>
            </div>
           
        }
    </div>
</section>

